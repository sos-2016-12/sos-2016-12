<!DOCTYPE html>
<html>

	<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="https://code.jquery.com/jquery-1.12.2.min.js"></script>
		<script>
			$(document).ready(function(){
				console.log("JQuery ready!");
				/*$('#button').click(function(){
					$("#log").html("<h1>Hello world<h1>");
				});*/
				$('#button').click(function(){
					console.log("Handling click");

					var request = $.ajax({

						  url: "http://sos-2016-12.herokuapp.com/api/v1/death_penalty_stats?apikey=1234",
						  type: "GET",
						  contentType: "application/json",
						  
						 
					});
					request.done(function(data,status,jqXHR) {
					  // Tratamiento en caso de exito
					  console.log("Handling request (OK)"); 
					  console.log("Data received"); 
					  console.log(data);
					  $("#status").html(jqXHR.status);
					  $('#table').append(
   						 $.map(data.country, function (country, index) {
    						return '<tr><td>' + country + '</td><td>' + data.abolition_year[index] + '</td></tr>';
						}).join());		
					  $("#log").html("done");

					});
					request.always(function(jqXHR, status) {
					  // Tratamiento en cualquier caso
					 if(status == "error") {
						$("#status").html(jqXHR.status);
					 	console.log(jqXHR.status);
					 	$("#data").html("");
					 	$("#log").html("error");

					 }				  
					});
				});

 			});
		</script>
	</head>

	<body>
		<h1>JQuery REST Client</h1>
		<br/>
		<span id="button" class="Button">GET Resources</span>
		<br/><hr/>
			HTTP Status: <span id="status"></span> 
		<br/><hr/>
			<span id="data">
				<table id="table">
					
				</table>
			</span> 
		<br/><hr/>
			<ul id="list"></ul> 
		<hr/>
		Log: <span id="log"></span>     
	</body>
</html>